<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Universal Video Web App</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: black;
    overflow: hidden;
    font-family: Arial, sans-serif;
}

.page {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    display: none;
}

.page.active {
    display: block;
}

/* PAGE 1 */
#page1 {
    background: url("1.png") center / cover no-repeat;
}

/* PAGE 2 */
#bgVideo {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

#buttonBox {
    position: absolute;
    bottom: 25vh;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    gap: 3vh;
    z-index: 5;
}

.img-btn {
    width: 95vw;
    max-width: 480px;
}

/* FULL VIDEO */
#videoPlayer {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* PAGE 3 */
#page3 {
    background: url("9.png") center / cover no-repeat;
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div id="page1" class="page active"></div>

<!-- PAGE 2 -->
<div id="page2" class="page">
    <video id="bgVideo" playsinline webkit-playsinline muted loop preload="auto">
        <source src="1.mp4" type="video/mp4">
        <source src="1.webm" type="video/webm">
    </video>

    <div id="buttonBox">
        <img src="3.png" class="img-btn" onclick="playVideo('P.mp4')">
        <img src="4.png" class="img-btn" onclick="playVideo('E.mp4')">
        <img src="5.png" class="img-btn" onclick="playVideo('C.mp4')">
    </div>
</div>

<!-- FULL VIDEO PAGE -->
<div id="videoPage" class="page">
    <video id="videoPlayer" playsinline webkit-playsinline controls></video>
</div>

<!-- FINAL IMAGE -->
<div id="page3" class="page"></div>

<script>
const pages = document.querySelectorAll(".page");
const page1 = document.getElementById("page1");
const page2 = document.getElementById("page2");
const videoPage = document.getElementById("videoPage");
const page3 = document.getElementById("page3");

const bgVideo = document.getElementById("bgVideo");
const videoPlayer = document.getElementById("videoPlayer");

// Show page function
function showPage(page) {
    pages.forEach(p => p.classList.remove("active"));
    page.classList.add("active");
}

/* PAGE 1 → PAGE 2 */
page1.addEventListener("click", () => {
    showPage(page2);

    // Play muted first for iOS
    bgVideo.muted = true;
    bgVideo.currentTime = 0;
    bgVideo.play().then(() => {
        // Unmute after user interaction
        bgVideo.muted = false;
    }).catch(err => console.log("Autoplay failed:", err));
});

/* PLAY FULL VIDEO */
function playVideo(src) {
    bgVideo.pause();
    showPage(videoPage);

    videoPlayer.src = src;
    videoPlayer.currentTime = 0;
    videoPlayer.play().catch(err => {
        console.log("Video play failed:", err);
    });
}

/* VIDEO END → SHOW FINAL IMAGE */
videoPlayer.addEventListener("ended", () => {
    showPage(page3);
});

// Optional: tap on background video to unmute if needed
bgVideo.addEventListener("click", () => {
    if(bgVideo.muted) bgVideo.muted = false;
});
</script>

</body>
</html>
